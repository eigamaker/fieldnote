# 選手能力値設計ドキュメント v2.0

## 概要

高校野球からプロ野球までを想定した生涯能力値システムです。フィジカル、メンタル、テクニカルの3つのカテゴリに分け、投手と野手で異なるテクニカル能力値を設定しています。スカウト分析値、現在値、ポテンシャル上限値の3つの値を管理し、Overall評価システムを提供します。

## 基本設計思想

### 能力値範囲
- **生涯能力値範囲**: 1-150
- **高校生レベル**: 1-100
- **プロ野球レベル**: 100-150
- **参考設定値**: 150以上（理論的上限として設定）

### 3つのカテゴリ分類
1. **フィジカル (Physical)**: 身体能力（投手・野手共通）
2. **メンタル (Mental)**: 精神・判断力（投手・野手共通）
3. **テクニカル (Technical)**: 技術・技能（投手と野手で異なる）

## 1. フィジカル能力値（投手・野手共通）

| 能力値 | 範囲 | 高校上限 | プロレベル | 説明 |
|--------|------|----------|------------|------|
| **筋力 (Strength)** | 1-150 | 70-85 | 100-130 | 筋力の強さ |
| **敏捷性 (Agility)** | 1-150 | 75-90 | 100-135 | 身のこなし、反応速度 |
| **持久力 (Stamina)** | 1-150 | 60-80 | 90-120 | 体力の持続性 |
| **柔軟性 (Flexibility)** | 1-150 | 70-85 | 100-125 | 体の柔軟性 |
| **バランス (Balance)** | 1-150 | 75-90 | 100-130 | 体のバランス |
| **瞬発力 (Explosiveness)** | 1-150 | 70-85 | 100-135 | 瞬間的な力の発揮 |

## 2. メンタル能力値（投手・野手共通）

| 能力値 | 範囲 | 高校上限 | プロレベル | 説明 |
|--------|------|----------|------------|------|
| **集中力 (Concentration)** | 1-150 | 70-90 | 100-140 | 試合中の集中力 |
| **冷静さ (Composure)** | 1-150 | 65-85 | 95-130 | プレッシャー耐性 |
| **判断力 (Decision Making)** | 1-150 | 60-80 | 90-125 | 状況判断能力 |
| **向上心 (Ambition)** | 1-150 | 70-90 | 100-135 | 上昇志向、成長意欲 |
| **規律 (Discipline)** | 1-150 | 65-85 | 95-130 | 自己管理、練習への取り組み |
| **リーダーシップ (Leadership)** | 1-150 | 60-80 | 90-125 | チームを引っ張る力 |

## 3. テクニカル能力値（投手）

| 能力値 | 範囲 | 高校上限 | プロレベル | 実数値対応 | 説明 |
|--------|------|----------|------------|------------|------|
| **球速 (Velocity)** | 1-150 | 70-90 | 100-140 | 125-165 km/h | 直球の球速 |
| **制球力 (Control)** | 1-150 | 60-80 | 90-130 | ストライク率60-85% | 投球の正確性 |
| **変化球 (Breaking Ball)** | 1-150 | 50-70 | 80-120 | 変化量5-30cm | 変化球の質 |
| **球種 (Pitch Variety)** | 1-150 | 40-60 | 70-110 | 2-6球種 | 習得球種の多さと質 |

### 球速の実数値変換

**球速実数値変換表:**
```
能力値 1-20:   125-130 km/h (高校生最低レベル)
能力値 21-40:  130-135 km/h (高校生一般レベル)
能力値 41-60:  135-140 km/h (高校生中堅レベル)
能力値 61-80:  140-145 km/h (高校生トップレベル)
能力値 81-100: 145-150 km/h (甲子園レベル)
能力値 101-120: 150-155 km/h (プロ野球レベル)
能力値 121-140: 155-160 km/h (プロ野球上位レベル)
能力値 141-150: 160-165 km/h (MLBレベル)
```

**球速計算式:**
```dart
// 能力値から実数値
velocityKmh = 125 + (abilityValue * 0.267)

// 実数値から能力値
abilityValue = (velocityKmh - 125) / 0.267
```

### 変化球の評価システム

**変化球能力値の意味:**
```
能力値 1-30:   変化量5-10cm (基本レベル)
能力値 31-60:  変化量10-17cm (中級レベル)
能力値 61-90:  変化量17-25cm (上級レベル)
能力値 91-120: 変化量25-30cm (プロレベル)
能力値 121-150: 変化量30cm以上 (MLBレベル)
```

**変化球の種類別評価:**
- **カーブ**: 縦の変化量が重要
- **スライダー**: 横の変化量が重要
- **フォーク**: 縦の変化量と落差が重要
- **チェンジアップ**: 速度差と変化量が重要

### 球種の評価システム

**球種能力値の意味:**
```
能力値 1-30:   2球種 (直球のみ)
能力値 31-60:  3球種 (直球+1変化球)
能力値 61-90:  4球種 (直球+2変化球)
能力値 91-120: 5球種 (直球+3変化球)
能力値 121-150: 6球種以上 (直球+4変化球以上)
```

**球種の質とバリエーション:**
- **基本球種**: 直球（必ず習得）
- **変化球1**: カーブ、スライダー、フォーク、チェンジアップから選択
- **変化球2-4**: 能力値に応じて追加習得
- **特殊球種**: 能力値120以上で習得可能（ナックル、スクリューなど）

## 4. テクニカル能力値（野手）

| 能力値 | 範囲 | 高校上限 | プロレベル | 説明 |
|--------|------|----------|------------|------|
| **ミート (Contact)** | 1-150 | 60-80 | 90-130 | ボールに当てる能力 |
| **パワー (Power)** | 1-150 | 50-70 | 80-120 | 長打力 |
| **選球眼 (Plate Discipline)** | 1-150 | 55-75 | 85-125 | ボールを見極める能力 |
| **守備力 (Fielding)** | 1-150 | 60-80 | 90-130 | 守備の基本技術 |
| **送球 (Throwing)** | 1-150 | 55-75 | 85-125 | 送球の正確性・強さ |
| **走塁 (Base Running)** | 1-150 | 65-85 | 95-135 | 走塁技術 |

## 5. Overall評価システム

### 計算式

**投手Overall:**
```
投手Overall = (
  フィジカル平均 × 0.25 +
  メンタル平均 × 0.25 +
  テクニカル平均 × 0.50
)
```

**野手Overall:**
```
野手Overall = (
  フィジカル平均 × 0.30 +
  メンタル平均 × 0.20 +
  テクニカル平均 × 0.50
)
```

### Overall評価ランク（高校時代のみ適用）

| ランク | 範囲 | レベル | 説明 |
|--------|------|--------|------|
| **S級** | 90-100 | 甲子園優勝候補レベル | ドラフト1位候補 |
| **A級** | 80-89 | 甲子園出場レベル | ドラフト上位候補 |
| **B級** | 70-79 | 県大会上位レベル | ドラフト候補 |
| **C級** | 60-69 | 県大会出場レベル | ドラフト下位候補 |
| **D級** | 50-59 | 一般レベル | ドラフト圏外 |

**注意**: このOverallランクは高校時代のドラフト評価を想定したものです。プロ野球での活躍レベルとは異なります。高校生の能力値は1-100の範囲で評価され、プロ野球レベル（100-150）は別途管理されます。

## 6. 3つの値の管理システム

各能力値に対して3つの値を管理します：

### 1. スカウト分析値 (Scouted Value)
- スカウトが分析した値
- 実際の値に誤差が含まれる
- スカウトスキルと信頼度に依存

### 2. 現在値 (Current Value)
- 選手の現在の実際の能力値
- 成長処理の対象
- 試合でのパフォーマンスに影響

### 3. ポテンシャル上限値 (Potential Value)
- 生涯で到達可能な最大値
- 才能ランクに基づいて決定
- 150が理論的上限

### 誤差計算例
```dart
// スカウト分析値の計算
scoutedValue = currentValue + randomError
where randomError = (スカウトスキルに基づく誤差範囲) × ランダム値
```

## 7. 高校時代の上限設定システム

### 成長度による高校上限の決定

```dart
// 高校上限の計算式
highSchoolCap = basePotential * growthRate * (1 + mentalBonus)

where:
- basePotential: 才能ランクに基づく基本ポテンシャル
- growthRate: 成長スピード (0.8-1.2)
- mentalBonus: メンタル能力による補正 (0.1-0.3)
```

### 才能ランク別の高校上限例

| 才能ランク | 高校上限 | 出現率 | 特徴 |
|------------|----------|--------|------|
| **ランク1** | 60-75 | 70% | 一般レベル |
| **ランク2** | 70-85 | 23% | 中堅レベル |
| **ランク3** | 80-95 | 5% | 上級レベル |
| **ランク4** | 85-100 | 2% | エリートレベル |
| **ランク5** | 90-105 | 0.01% | スーパースター |
| **ランク6** | 95-110 | 0.0004% | 怪物級 |

## 8. 選手生成システム

### ゲームスタート時の生成

**生成対象:**
- **プロ野球選手**: 既存のプロ選手（NPB・MLB）
- **有名高校生**: U15日本代表29名など、事前に注目されている選手
- **総数**: 数百名程度に制限

### スカウト発見による生成

**発見対象:**
- 才能ランク2以上の選手のみ（高校上限70以上）
- 学校ランクに応じた発見確率
- 無名の選手やドラフトに引っかからない選手は生成しない

**学校ランク別発見確率:**
- **伝統校**: 高確率で才能のある選手を発見
- **名門校**: 中確率で才能のある選手を発見
- **強豪校**: 低確率で才能のある選手を発見
- **一般校**: 非常に低確率で才能のある選手を発見

### 発見される選手の想定分布

**才能のある高校生のみ（各学年数百名程度）:**

**1年生の想定分布:**
- **90-100**: ほぼゼロ（0.1%）
- **80-89**: 1-2人（0.5%）
- **70-79**: 10-20人（5%）
- **60-69**: 50-100人（25%）
- **50-59**: 100-200人（50%）
- **40-49**: 50-100人（20%）

**3年生の想定分布:**
- **90-100**: 1-2人（0.5%）
- **80-89**: 5-10人（2.5%）
- **70-79**: 30-50人（15%）
- **60-69**: 80-120人（40%）
- **50-59**: 60-100人（30%）
- **40-49**: 20-40人（12%）

## 9. 実装上の考慮事項

### データベース構造
- **PlayerAbilities**: 現在の能力値を保存
- **PlayerPotentials**: ポテンシャル上限値を保存
- **ScoutAnalysis**: スカウト分析値を保存

### 成長システムとの連携
- 現在値は成長処理の対象
- ポテンシャル上限値は成長の上限として機能
- 高校上限は高校時代の成長制限として機能

### スカウトシステムとの連携
- スカウト分析値はスカウト結果として表示
- スカウトスキルに応じて誤差が調整
- 信頼度に応じて分析精度が向上

## 10. 今後の拡張可能性

- ポジション別の能力値重み付け
- 二刀流選手の特別処理
- 能力値の相関関係（例：球速と筋力の相関）
- 成長イベントによる能力値変動
- 怪我による能力値低下
- 世代別選手の生成（大学・社会人・NPB・MLB）
- 甲子園出場選手の特別能力値調整
- ドラフトシステムとの連携

## まとめ

この設計により、高校野球からプロ野球までを一貫して管理できる能力値システムを実現します。3つのカテゴリによる明確な分類、投手と野手の区別、実数値対応、3つの値の管理により、現実的で使いやすいシステムとなっています。
