# 次の開発スコープ定義

## 概要

既存の`ability_values_design.md`をベースに、今回の企画に適した形で選手能力値システムとスカウトシステムの実装スコープを定義します。

## 1. 能力値システムの基本設計

### 能力値の範囲設定
- **基本範囲**: 0-150（生涯を通じての数値）
- **高校生基本上限**: 100（制限は設けず、生成ロジックと成長ロジックで100あたりを上限とする）
- **球速・変化球**: 別定義（既存の球速システムを活用）

### 3つの能力値テーブル

#### 1. 現在の能力値テーブル（CurrentAbilities）
- 選手の現在の実際の能力値
- 成長処理の対象となるテーブル
- フラグ管理が必要（例：引退済み、成長処理除外など）

#### 2. 生涯成長上限テーブル（PotentialAbilities）
- その選手の生涯成長における上限値
- 高校生であろうがプロ選手であろうが同じテーブルを使用
- 才能ランクに基づいて設定

#### 3. スカウト分析能力値テーブル（ScoutedAbilities）
- スカウトが分析した能力値
- スカウト精度に応じて誤差が含まれる
- 実際の能力値とは異なる場合がある

### 能力値の統一性
- 高校、大学、プロで同じ能力値定義を使用
- 生涯を通じての成長を考慮した設計
- ポジション変更（投手→野手、野手→投手）に対応

## 2. 選手生成システム

### 選手の分類
1. **注目選手（入学時点で既知）**
   - 中学時代の日本代表　（U15日本代表を投手5人、他のポジション各3人）29名
   - 毎年4月（新年度開始時）に生成

2. **発掘選手（スカウトで発見）**
   - スカウト実行時に生成
   - 事前生成なし
   - 学校の強度に応じた生成確率

### 生成タイミング
- **注目選手**: 年度開始時（4月）
- **発掘選手**: スカウト実行時
- **生成数**: 学校の強度に応じて決定

## 3. スカウトアクションシステム

### アクションの種類
1. **基本情報収集**
   - 練習視察: 選手の発見、フィジカル能力の判定
   - 練習試合視察：選手の発見、技術面の判定
   - インタビュー：メンタル能力の判定
   - ビデオ分析：成長性の分析


### スカウトレポートの完成条件
- スカウトの選手分析が完了した時点でスカウトレポート作成。
- 今後の成長の予測と、ドラフト順位、想定する役割（レギュラー、バックアップなど）

## 4. 選手の学校・チームとの紐づけ

### 所属関係の管理
- 学校ID、チームIDとの関連
- 所属期間の管理


### チーム・学校の管理
- レベル管理
- 所属選手の管理
- ポジション別選手数

## 5. 成長システム

### 成長要素
- 練習、試合には関与しないことから成長はランダム性、年齢などによるものとする。


### 成長計算
- 年齢・学年・ステージの変化処理
- 成長上限のチェック

### 成長イベント
- 定期的な成長イベント（3か月に1度）
- 特殊成長イベント
- 年度更新処理

## 6. 人物定義テーブル

### 基本情報
- 名前
- 年齢
- 出身地（hometown）
- 学年
- 学校ID（school_id）

### ステータス情報
- 卒業済みフラグ（is_graduated）
- ドラフト済みフラグ（is_drafted）
- ドラフト年（drafted_at）
- ドラフト順位
- プロチームID（professional_team_id）

### 注目度・評価情報
- 注目度（fame）
- 公知フラグ（is_publicly_known）　→　不要かも。これはリストアップするとか、ニュース生成にこれがあると便利だと思う。
- スカウトお気に入りフラグ（is_scout_favorite）
- 発見済みフラグ（is_discovered）

## 7. 実装が必要な新機能

### 選手生成マネージャー
- 年度開始時の注目選手生成
- スカウト発掘選手の生成
- 選手タイプ別の能力値設定

### スカウトアクションマネージャー
- 各アクションの実行処理
- スカウトレポートの管理
- 完成度の計算・表示

### 能力値管理システム
- 3層構造の能力値管理
- スカウト精度による判定能力の調整
- 長期的成長の管理

### 年度管理システム
- 年度開始時の選手生成
- 卒業・進学の処理
- 能力値の継承・調整

## 8. データ設計の考慮点

### 選手データの永続化
- 基本情報（名前、タイプ、注目度）
- 3層の能力値データ
- スカウトレポートの進捗
- 成長履歴

### 学校データの拡張
- 年度別の選手構成
- 注目選手の入学予定
- 強度変化の履歴

## 9. 技術的な実装ポイント

### パフォーマンス最適化
- 大量データ処理時の最適化
- メモリ使用量の最適化
- データベースクエリの最適化

### エラーハンドリング
- 適切なログシステム
- エラー表示の実装
- データ整合性のチェック

### テストコード
- 各マネージャークラスの単体テスト
- 統合テスト
- パフォーマンステスト

## 10. 開発フェーズ

### Phase 1: 基本システム（2-3週間）
- 3層能力値テーブルの実装
- 基本的な選手生成システム
- 人物定義テーブルの実装

### Phase 2: スカウトシステム（2-3週間）
- スカウトアクションの実装
- スカウトレポートの管理
- 発掘選手の生成

### Phase 3: 成長システム（2-3週間）
- 成長計算システムの実装
- 年度管理システムの実装
- 成長イベントの管理

### Phase 4: 統合・最適化（1-2週間）
- システム統合
- パフォーマンス最適化
- テスト・デバッグ

## 11. 既存システムとの整合性

### 既存の能力値設計との対応
- 既存の能力値範囲（0-150）を維持
- 既存のポジションシステムを活用
- 既存の成長システムとの連携

### 拡張・変更点
- 3層テーブル構造の追加
- スカウトシステムの新規実装
- 動的選手生成システムの実装

## 12. リスクと対策

### 技術的リスク
- **大量データ処理**: バッチ処理の実装
- **メモリ使用量**: データの段階的読み込み
- **パフォーマンス**: インデックスの最適化

### 設計的リスク
- **データ整合性**: トランザクション管理の強化
- **拡張性**: モジュール化された設計
- **保守性**: 適切なドキュメント化

## 13. 成功指標

### 機能的な指標
- 3層能力値テーブルの正常動作
- スカウトシステムの完成
- 成長システムの正常動作

### パフォーマンス指標
- 選手生成処理の速度
- データベースクエリの応答時間
- メモリ使用量の最適化

### 品質指標
- テストカバレッジ
- バグの発生率
- ユーザビリティの向上

## 14. 今後の拡張可能性

### 短期拡張
- より詳細なスカウトアクション
- 選手の性格・特性システム
- チーム戦術システム

### 長期拡張
- プロ野球システムとの連携
- 国際大会システム
- AI・機械学習による選手評価

## 15. まとめ

この開発スコープにより、既存の能力値設計を基盤としながら、より動的で戦略的なスカウトシステムが実現できます。3層の能力値テーブル、動的選手生成、包括的な成長システムにより、高校野球からプロ野球までを見据えた長期的な選手育成システムが構築できます。

実装の際は、既存システムとの整合性を保ちながら、段階的に機能を追加していくことを推奨します。
